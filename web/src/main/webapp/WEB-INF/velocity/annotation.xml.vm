<annotation quality='$annotation.getQualityQualifier()' #if($annotation.synonym)accession="$annotation.synonym" database='neXtProt'#end>
	#if($annotation.getCvTermName())
    <cv-term accession='$annotation.getCvTermAccessionCode()' terminology='$StringUtils.camelToKebabCase($annotation.getCvApiName())'>$annotation.getCvTermName()</cv-term>
    #end
	#if($annotation.getDescription())
    <description>
	  #set($UNESCAPED_CDATA = $annotation.getDescription())
      <![CDATA[$UNESCAPED_CDATA]]>
    </description>
    #end
	#if($annotation.getVariant())
    	<variant original='$annotation.getVariant().getOriginal()' variation='$annotation.getVariant().getVariant()' />
	#end

	#if($annotation.getBioObject())
		#set($bioObject = $annotation.getBioObject())
		#set($bioType = $bioObject.getBioType().toString())
		#set($resourceType = $bioObject.getResourceType().toString())

		#if($bioObject.size() == 1)
			#if($resourceType == "EXTERNAL")
                <biological-object bio-type='$StringUtils.snakeToKebabCase($bioType)' resource-internal-ref='$bioObject.getId()'/>
			#elseif($resourceType == "INTERNAL")
                <biological-object bio-type='$StringUtils.snakeToKebabCase($bioType)' accession='$bioObject.getAccession()' database='neXtProt'/>
			#end
		#else
            <biological-object bio-type='$StringUtils.snakeToKebabCase($bioType)'>
                <biological-object-list>
				#foreach($bo in $bioObject.getContent())
					#if($resourceType == "EXTERNAL")
                        <biological-object bio-type='$StringUtils.snakeToKebabCase($bo.getBioType().toString())' resource-internal-ref='$bo.getId()'/>
					#elseif($resourceType == "INTERNAL")
                        <biological-object bio-type='$StringUtils.snakeToKebabCase($bo.getBioType().toString())' accession='$bo.getAccession()' database='neXtProt'/>
					#end
				#end
                </biological-object-list>
            </biological-object>
		#end
	#end

	## might have no properties so need to check
	#if(($annotation.getProperties()) && ($annotation.getProperties().size() > 0))
    <property-list>
        #foreach($property in $annotation.getProperties())
			#if(!$property.getName().equals("rank"))
				<property name='$property.getName()' value='$property.getValue()' #if($property.getValueType()) value-type='$property.getValueType()' #end #if($property.getAccession()) accession='$property.getAccession()' #end />
			#end
		#end
    </property-list>
	#end
    #if($annotation.getEvidences())
    <evidence-list>
        #foreach($evidence in $annotation.getEvidences())
			## should include qualifier-type='$evidence.getQualifierType()' 
			<evidence is-negative='$evidence.isNegativeEvidence()' evidence-code='$evidence.getEvidenceCodeAC()' resource-internal-ref='$evidence.getResourceId()'  resource-assoc-type='$evidence.getResourceAssociationType()' #if($evidence.getQualityQualifier()) quality='$evidence.getQualityQualifier()' #end resource-type='$evidence.getResourceType()' #if($evidence.getExperimentalContextId()>0) experimental-context-internal-ref='$evidence.getExperimentalContextId()' #end #if($evidence.getAssignedBy()) source-internal-ref='$evidence.getAssignedBy()' #end >
				#if($evidence.getPropertiesNames())
					<property-list>
						#foreach($pk in $evidence.getPropertiesNames())
							<property name="$pk" value="$evidence.getPropertyValue($pk)" />
						#end
					</property-list>
				#end
			</evidence>
		#end
    </evidence-list>
	#end
	#set($target-isoform-list = $annotation.getTargetingIsoformsMap())
	#parse('target-isoform-list-annotation.xml.vm')	
</annotation>
